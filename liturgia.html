<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Liturgia Diária API</title>
</head>
<body>

<div id="liturgia">Carregando…</div>

<script>
async function loadLiturgia() {
  const hoje = new Date().toISOString().split("T")[0];
  const apiUrl = `https://liturgia.up.railway.app/v2/readings/${hoje}`;
  const proxyUrl = "https://api.allorigins.win/raw?url=" + encodeURIComponent(apiUrl);

  try {
    const res = await fetch(proxyUrl);
    const text = await res.text();
    // se veio HTML → problema
    if (text.trim().startsWith("<")) {
      throw new Error("Resposta inválida (HTML em vez de JSON)");
    }
    const data = JSON.parse(text);

    document.getElementById("liturgia").innerHTML =
      `<pre>${JSON.stringify(data, null, 2)}</pre>`;

  } catch (err) {
    document.getElementById("liturgia").innerText =
      "Erro ao carregar API: " + err.message;
  }
}

loadLiturgia();
</script>

</body>
</html>
