<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jardim de Santa Teresinha</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #1b1026;
  font-family: Arial, sans-serif;
}

/* ===== CAMERA ===== */
#camera {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: relative;
}

/* ===== MAPA ===== */
#mapa {
  position: absolute;
  width: 3000px;
  height: 2000px;
  background: radial-gradient(#3a2352, #12091c);
  transform-origin: center;
}

/* ===== HUD ===== */
#hud {
  position: fixed;
  top: 10px;
  left: 10px;
  background: rgba(0,0,0,0.6);
  color: #fff;
  padding: 10px;
  border-radius: 10px;
  z-index: 10;
}

#hud button {
  margin-top: 5px;
  width: 100%;
}

/* ===== PERSONAGENS ===== */
.npc {
  position: absolute;
  width: 64px;
  height: 64px;
  background: pink;
  border-radius: 50%;
  animation: bounce 1s infinite alternate;
}

@keyframes bounce {
  from { transform: translateY(0); }
  to { transform: translateY(4px); }
}

/* ===== FLORES ===== */
.flor {
  position: absolute;
  width: 16px;
  height: 16px;
  background: radial-gradient(#ffb7d5, #ff5fa2);
  border-radius: 50%;
  animation: aparecer 0.4s ease-out;
}

@keyframes aparecer {
  from { transform: scale(0); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
</style>
</head>

<body>

<div id="hud">
  ðŸŒ¸ Flores: <span id="flores">0</span><br>
  ðŸŒ± Auto: <span id="auto">1</span>/s
  <button onclick="upgradeClick()">Upar clique</button>
  <button onclick="upgradeAuto()">Upar auto</button>
</div>

<div id="camera">
  <div id="mapa">
    <div id="personagens"></div>
    <div id="flores-area"></div>
  </div>
</div>

<script>
/* ===== VARIÃVEIS ===== */
let flores = 0;
let floresPorClick = 1;
let floresAuto = 1;
let zoom = 1;

/* ===== ELEMENTOS ===== */
const mapa = document.getElementById("mapa");
const floresSpan = document.getElementById("flores");
const autoSpan = document.getElementById("auto");
const floresArea = document.getElementById("flores-area");
const personagens = document.getElementById("personagens");

/* ===== SALVAR / CARREGAR ===== */
function salvar() {
  localStorage.setItem("jogoSanta", JSON.stringify({
    flores,
    floresPorClick,
    floresAuto
  }));
}

function carregar() {
  const save = JSON.parse(localStorage.getItem("jogoSanta"));
  if (save) {
    flores = save.flores;
    floresPorClick = save.floresPorClick;
    floresAuto = save.floresAuto;
  }
}
carregar();

/* ===== HUD ===== */
function atualizarHUD() {
  floresSpan.textContent = flores;
  autoSpan.textContent = floresAuto;
}
atualizarHUD();

/* ===== GERAR FLORES ===== */
function criarFlor(x, y) {
  const flor = document.createElement("div");
  flor.className = "flor";
  flor.style.left = x + "px";
  flor.style.top = y + "px";
  floresArea.appendChild(flor);

  setTimeout(() => flor.remove(), 5000);
}

/* ===== CLIQUE NO MAPA ===== */
mapa.addEventListener("click", (e) => {
  flores += floresPorClick;
  criarFlor(e.offsetX, e.offsetY);
  atualizarHUD();
  salvar();
});

/* ===== FLORES AUTOMÃTICAS ===== */
setInterval(() => {
  flores += floresAuto;
  criarFlor(
    Math.random() * 3000,
    Math.random() * 2000
  );
  atualizarHUD();
  salvar();
}, 1000);

/* ===== UPGRADES ===== */
function upgradeClick() {
  const custo = floresPorClick * 10;
  if (flores >= custo) {
    flores -= custo;
    floresPorClick++;
    atualizarHUD();
    salvar();
  }
}

function upgradeAuto() {
  const custo = floresAuto * 25;
  if (flores >= custo) {
    flores -= custo;
    floresAuto++;
    atualizarHUD();
    salvar();
  }
}

/* ===== SANTA TERESINHA ===== */
const santa = document.createElement("div");
santa.className = "npc";
santa.style.left = "1500px";
santa.style.top = "1000px";
personagens.appendChild(santa);

function moverSanta() {
  const x = Math.random() * 2800;
  const y = Math.random() * 1800;
  santa.style.transition = "left 3s linear, top 3s linear";
  santa.style.left = x + "px";
  santa.style.top = y + "px";
}
setInterval(moverSanta, 4000);

/* ===== ZOOM ===== */
window.addEventListener("wheel", (e) => {
  zoom += e.deltaY * -0.001;
  zoom = Math.min(Math.max(0.5, zoom), 2);
  mapa.style.transform = `scale(${zoom})`;
});

/* ===== PAN (ARRASTAR MAPA) ===== */
let arrastando = false;
let startX, startY;

document.addEventListener("mousedown", e => {
  arrastando = true;
  startX = e.clientX - mapa.offsetLeft;
  startY = e.clientY - mapa.offsetTop;
});

document.addEventListener("mouseup", () => arrastando = false);

document.addEventListener("mousemove", e => {
  if (!arrastando) return;
  mapa.style.left = e.clientX - startX + "px";
  mapa.style.top = e.clientY - startY + "px";
});
</script>

</body>
</html>
