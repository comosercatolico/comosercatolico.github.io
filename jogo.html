<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Meu jogo</title>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }

    canvas {
      display: block;
      image-rendering: pixelated;
    }
  </style>
</head>

<body>

<canvas id="gameCanvas"></canvas>

<script>
/* ======================================================
   CONFIG
====================================================== */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const TILE_SIZE = 32;

/* ======================================================
   IMAGENS
====================================================== */
const grass = new Image();
grass.src = "tiles/ground/grass.png";

const library = new Image();
library.src = "tiles/library_tileset.png";

const player = new Image();
player.src = "personagem.png"; // troque se tiver outro nome

/* ======================================================
   PLAYER
====================================================== */
let playerX = 300;
let playerY = 300;
let speed = 4;

/* ======================================================
   TECLAS
====================================================== */
const keys = {};

window.addEventListener("keydown", (e) => {
  keys[e.key] = true;
});

window.addEventListener("keyup", (e) => {
  keys[e.key] = false;
});

/* ======================================================
   MAPA
====================================================== */
function drawGrass() {
  for (let y = 0; y < canvas.height; y += TILE_SIZE) {
    for (let x = 0; x < canvas.width; x += TILE_SIZE) {
      ctx.drawImage(grass, x, y, TILE_SIZE, TILE_SIZE);
    }
  }
}

/* ======================================================
   DESENHAR BIBLIOTECA
====================================================== */
function drawLibrary() {
  ctx.drawImage(
    library,
    400, 200,     // posição no mapa
    256, 256      // tamanho na tela
  );
}

/* ======================================================
   PLAYER
====================================================== */
function drawPlayer() {
  ctx.drawImage(player, playerX, playerY, 48, 48);
}

/* ======================================================
   UPDATE MOVIMENTO
====================================================== */
function updatePlayer() {
  if (keys["ArrowUp"]) playerY -= speed;
  if (keys["ArrowDown"]) playerY += speed;
  if (keys["ArrowLeft"]) playerX -= speed;
  if (keys["ArrowRight"]) playerX += speed;
}

/* ======================================================
   LOOP PRINCIPAL
====================================================== */
function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawGrass();
  drawLibrary();

  updatePlayer();
  drawPlayer();

  requestAnimationFrame(gameLoop);
}

/* ======================================================
   INICIAR QUANDO CARREGAR
====================================================== */
grass.onload = () => {
  gameLoop();
};
</script>

</body>
</html>
