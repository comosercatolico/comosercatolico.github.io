<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jardim de Santa Teresinha</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

#game {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #7bbf6a;
  cursor: grab;
}

#game:active {
  cursor: grabbing;
}

/* C√ÇMERA */
#camera {
  position: absolute;
  width: 3000px;
  height: 3000px;
  transform: translate(0,0);
}

/* MAPA TILE */
#mapa {
  position: absolute;
  width: 3000px;
  height: 3000px;
}

.tile {
  position: absolute;
  width: 120px;
  height: 120px;
  box-sizing: border-box;
}

.grama {
  background:
    radial-gradient(#6aa84f 25%, transparent 25%);
  background-size: 40px 40px;
  background-color: #7bbf6a;
}

/* CRUZ */
.cruz {
  background-color: #5a9c3b;
}

/* SANTA */
#santa {
  position: absolute;
  width: 120px;
  left: 1500px;
  top: 1500px;
  transform: translate(-50%, -50%);
  z-index: 10;
  pointer-events: none;
}

/* FLOR */
.flor {
  position: absolute;
  width: 40px;
  cursor: pointer;
  z-index: 6;
}

/* HUD */
#hud {
  position: fixed;
  top: 20px;
  left: 20px;
  background: rgba(255,255,255,0.9);
  padding: 12px;
  border-radius: 10px;
  z-index: 20;
}

/* UPGRADES */
#upgrades {
  position: fixed;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 20;
}

button {
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: #7b4bb7;
  color: white;
  font-weight: bold;
  cursor: pointer;
}

button:disabled {
  background: #aaa;
}

/* BIBLIOTECA DECORATIVA */
#biblioteca {
  position: absolute;
  width: 360px;
  height: 360px;
  left: 0;
  top: 0;
  background: linear-gradient(#8b5a2b, #6b3f1d);
  border: 6px solid #4a2a14;
  border-radius: 12px;
  z-index: 8;
}

#biblioteca::before {
  content: "";
  position: absolute;
  top: -80px;
  left: -20px;
  width: 400px;
  height: 80px;
  background: #5b2d0c;
  clip-path: polygon(0 100%, 50% 0, 100% 100%);
}

.porta {
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 80px;
  height: 120px;
  background: #3b1e0b;
  transform: translateX(-50%);
  border-radius: 8px 8px 0 0;
}

.janela {
  position: absolute;
  width: 50px;
  height: 60px;
  background: #d9c28f;
  border: 4px solid #5a3a1c;
  border-radius: 6px;
}

.j1 { left: 50px; top: 80px; }
.j2 { right: 50px; top: 80px; }
</style>
</head>

<body>

<div id="game">
  <div id="camera">
    <div id="mapa"></div>

    <div id="biblioteca">
      <div class="janela j1"></div>
      <div class="janela j2"></div>
      <div class="porta"></div>
    </div>

    <img src="santa.png" id="santa">
  </div>
</div>

<div id="hud">
  üå∏ Flores: <span id="flores">0</span><br>
  üëÜ Por clique: <span id="porClique">1</span><br>
  ‚è± Auto/s: <span id="auto">0</span>
</div>

<div id="upgrades">
  <button onclick="uparClique()">Upar clique (üå∏ <span id="c1">10</span>)</button>
  <button onclick="uparAuto()">Upar auto (üå∏ <span id="c2">20</span>)</button>
  <button onclick="uparFlor()">Upar flor (üå∏ <span id="c3">30</span>)</button>
</div>

<script>
/* ===== MAPA TILES ===== */
const TILE = 120;
const MAP_W = 25;
const MAP_H = 25;
const mapaEl = document.getElementById("mapa");

function renderMapa() {
  for (let y = 0; y < MAP_H; y++) {
    for (let x = 0; x < MAP_W; x++) {
      const tile = document.createElement("div");
      tile.className = "tile grama";

      if (x === Math.floor(MAP_W / 2) || y === Math.floor(MAP_H / 2)) {
        tile.classList.add("cruz");
      }

      tile.style.left = x * TILE + "px";
      tile.style.top = y * TILE + "px";
      mapaEl.appendChild(tile);
    }
  }
}
renderMapa();

/* ===== VARI√ÅVEIS JOGO ===== */
let flores = Number(localStorage.getItem("flores")) || 0;
let porClique = Number(localStorage.getItem("porClique")) || 1;
let auto = Number(localStorage.getItem("auto")) || 0;
let valorFlor = Number(localStorage.getItem("valorFlor")) || 3;

let custoClique = 10;
let custoAuto = 20;
let custoFlor = 30;

const floresEl = document.getElementById("flores");
const porCliqueEl = document.getElementById("porClique");
const autoEl = document.getElementById("auto");

/* ===== SALVAR ===== */
function salvar() {
  localStorage.setItem("flores", flores);
  localStorage.setItem("porClique", porClique);
  localStorage.setItem("auto", auto);
  localStorage.setItem("valorFlor", valorFlor);
}

/* ===== ATUALIZAR ===== */
function atualizar() {
  floresEl.textContent = flores;
  porCliqueEl.textContent = porClique;
  autoEl.textContent = auto;
  document.getElementById("c1").textContent = custoClique;
  document.getElementById("c2").textContent = custoAuto;
  document.getElementById("c3").textContent = custoFlor;
  salvar();
}
atualizar();

/* ===== CLIQUE ===== */
game.onclick = e => {
  if (e.target.classList.contains("flor")) return;
  flores += porClique;
  atualizar();
};

/* ===== FLORES ===== */
function criarFlor() {
  if (Math.random() > 0.4) return;

  const flor = document.createElement("img");
  flor.src = "flor.png";
  flor.className = "flor";
  flor.style.left = Math.random() * 2900 + "px";
  flor.style.top = Math.random() * 2900 + "px";

  flor.onclick = e => {
    e.stopPropagation();
    flores += valorFlor;
    flor.remove();
    atualizar();
  };

  camera.appendChild(flor);
}
setInterval(criarFlor, 3500);

/* ===== AUTO ===== */
setInterval(() => {
  flores += auto;
  atualizar();
}, 1000);

/* ===== UPGRADES ===== */
function uparClique() {
  if (flores >= custoClique) {
    flores -= custoClique;
    porClique++;
    custoClique *= 2;
    atualizar();
  }
}
function uparAuto() {
  if (flores >= custoAuto) {
    flores -= custoAuto;
    auto++;
    custoAuto *= 2;
    atualizar();
  }
}
function uparFlor() {
  if (flores >= custoFlor) {
    flores -= custoFlor;
    valorFlor += 2;
    custoFlor *= 2;
    atualizar();
  }
}

/* ===== C√ÇMERA ARRAST√ÅVEL ===== */
let camX = 1500;
let camY = 1500;
let dragging = false;
let lastX = 0;
let lastY = 0;

game.addEventListener("mousedown", e => {
  dragging = true;
  lastX = e.clientX;
  lastY = e.clientY;
});

window.addEventListener("mouseup", () => dragging = false);

window.addEventListener("mousemove", e => {
  if (!dragging) return;

  camX -= (e.clientX - lastX);
  camY -= (e.clientY - lastY);

  lastX = e.clientX;
  lastY = e.clientY;

  camX = Math.max(0, Math.min(3000 - window.innerWidth, camX));
  camY = Math.max(0, Math.min(3000 - window.innerHeight, camY));

  camera.style.transform = `translate(${-camX}px, ${-camY}px)`;
});
</script>

</body>
</html>
