<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jardim de Santa Teresinha</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: Arial, sans-serif;
  user-select: none;
}

/* Tela */
#game {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #7bbf6a;
  cursor: grab;
}
#game:active {
  cursor: grabbing;
}

/* C√¢mera */
#camera {
  position: absolute;
  width: 3000px;
  height: 3000px;
}

/* MAPA */
#mapa {
  position: absolute;
  width: 3000px;
  height: 3000px;
}

/* Tiles */
.tile {
  position: absolute;
  width: 120px;
  height: 120px;
}

/* Grama */
.grama {
  background:
    radial-gradient(circle at 30% 30%, #6aa84f 20%, transparent 21%),
    radial-gradient(circle at 70% 60%, #5f9e44 18%, transparent 19%),
    #7bbf6a;
}

/* Caminho */
.caminho {
  background:
    linear-gradient(45deg, #c9b27c 25%, transparent 25%),
    linear-gradient(-45deg, #c9b27c 25%, transparent 25%),
    #d8c58a;
  background-size: 20px 20px;
}

/* Santa */
#santa {
  position: absolute;
  width: 120px;
  left: 1500px;
  top: 1500px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 10;
}

/* HUD */
#hud {
  position: fixed;
  top: 20px;
  left: 20px;
  background: rgba(255,255,255,0.9);
  padding: 12px;
  border-radius: 10px;
  z-index: 20;
}
</style>
</head>

<body>

<div id="game">
  <div id="camera">
    <div id="mapa"></div>
    <img src="santa.png" id="santa">
  </div>
</div>

<div id="hud">
  üß± Tile system em teste<br>
  üì∑ Arraste para mover
</div>

<script>
/* =====================================================
   ‚öôÔ∏è CONSTANTES
===================================================== */
const TILE_SIZE = 120;
const MAP_W = 25;
const MAP_H = 25;

/* =====================================================
   üß† MAPA COMO DADOS
   0 = grama
   1 = caminho
===================================================== */
const mapaDados = [];

for (let y = 0; y < MAP_H; y++) {
  mapaDados[y] = [];
  for (let x = 0; x < MAP_W; x++) {
    mapaDados[y][x] = 0;
  }
}

/* =====================================================
   ‚ûï DESENHA UMA CRUZ NO MAPA (PROVA)
===================================================== */
const meioX = Math.floor(MAP_W / 2);
const meioY = Math.floor(MAP_H / 2);

for (let x = 0; x < MAP_W; x++) {
  mapaDados[meioY][x] = 1; // horizontal
}

for (let y = 0; y < MAP_H; y++) {
  mapaDados[y][meioX] = 1; // vertical
}

/* =====================================================
   üß± RENDERIZA MAPA
===================================================== */
const mapaEl = document.getElementById("mapa");

function renderMapa() {
  mapaEl.innerHTML = "";

  for (let y = 0; y < MAP_H; y++) {
    for (let x = 0; x < MAP_W; x++) {
      const tile = document.createElement("div");
      tile.classList.add("tile");

      if (mapaDados[y][x] === 0) tile.classList.add("grama");
      if (mapaDados[y][x] === 1) tile.classList.add("caminho");

      tile.style.left = x * TILE_SIZE + "px";
      tile.style.top = y * TILE_SIZE + "px";

      mapaEl.appendChild(tile);
    }
  }
}

renderMapa();

/* =====================================================
   üì¶ BIBLIOTECA: DragCamera
===================================================== */
class DragCamera {
  constructor(game, camera, worldW, worldH) {
    this.game = game;
    this.camera = camera;
    this.worldW = worldW;
    this.worldH = worldH;

    this.x = 1500;
    this.y = 1500;
    this.drag = false;
    this.sx = 0;
    this.sy = 0;

    this.init();
  }

  init() {
    this.game.addEventListener("mousedown", e => {
      this.drag = true;
      this.sx = e.clientX;
      this.sy = e.clientY;
    });

    window.addEventListener("mouseup", () => this.drag = false);

    window.addEventListener("mousemove", e => {
      if (!this.drag) return;

      const dx = e.clientX - this.sx;
      const dy = e.clientY - this.sy;

      this.sx = e.clientX;
      this.sy = e.clientY;

      this.x -= dx;
      this.y -= dy;

      this.clamp();
      this.update();
    });

    this.update();
  }

  clamp() {
    this.x = Math.max(0, Math.min(this.worldW - window.innerWidth, this.x));
    this.y = Math.max(0, Math.min(this.worldH - window.innerHeight, this.y));
  }

  update() {
    this.camera.style.transform =
      `translate(${-this.x}px, ${-this.y}px)`;
  }
}

/* =====================================================
   üì∑ INICIALIZA C√ÇMERA
===================================================== */
new DragCamera(
  document.getElementById("game"),
  document.getElementById("camera"),
  3000,
  3000
);
</script>

</body>
</html>
