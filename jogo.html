<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jardim de Santa Teresinha</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: Arial, sans-serif;
  user-select: none;
}

/* Tela */
#game {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #7bbf6a;
  cursor: grab;
}

#game:active {
  cursor: grabbing;
}

/* C√¢mera */
#camera {
  position: absolute;
  width: 3000px;
  height: 3000px;
  left: 0;
  top: 0;
}

/* ===== MAPA EM TILES ===== */
#mapa {
  position: absolute;
  width: 3000px;
  height: 3000px;
  display: grid;
  grid-template-columns: repeat(25, 120px);
  grid-template-rows: repeat(25, 120px);
}

.tile {
  width: 120px;
  height: 120px;
}

.grama {
  background:
    radial-gradient(circle at 30% 30%, #6aa84f 20%, transparent 21%),
    radial-gradient(circle at 70% 60%, #5f9e44 18%, transparent 19%),
    #7bbf6a;
}

/* Santa */
#santa {
  position: absolute;
  width: 120px;
  left: 1500px;
  top: 1500px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 10;
}

/* Flor */
.flor {
  position: absolute;
  width: 40px;
  cursor: pointer;
  z-index: 5;
}

/* HUD */
#hud {
  position: fixed;
  top: 20px;
  left: 20px;
  background: rgba(255,255,255,0.9);
  padding: 12px;
  border-radius: 10px;
  z-index: 20;
}

/* Upgrades */
#upgrades {
  position: fixed;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 20;
}

button {
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: #7b4bb7;
  color: white;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="game">
  <div id="camera">
    <div id="mapa"></div>
    <img src="santa.png" id="santa">
  </div>
</div>

<div id="hud">
  üå∏ Flores: <span id="flores">0</span><br>
  üëÜ Por clique: <span id="porClique">1</span><br>
  ‚è± Auto/s: <span id="auto">0</span>
</div>

<div id="upgrades">
  <button onclick="uparClique()">Upar clique (üå∏ <span id="c1">10</span>)</button>
  <button onclick="uparAuto()">Upar auto (üå∏ <span id="c2">20</span>)</button>
  <button onclick="uparFlor()">Upar flor (üå∏ <span id="c3">30</span>)</button>
</div>

<script>
/* =====================================================
   üì¶ BIBLIOTECA: DragCamera
===================================================== */
class DragCamera {
  constructor(gameEl, cameraEl, worldWidth, worldHeight) {
    this.game = gameEl;
    this.camera = cameraEl;
    this.worldWidth = worldWidth;
    this.worldHeight = worldHeight;

    this.x = 1500;
    this.y = 1500;

    this.dragging = false;
    this.startX = 0;
    this.startY = 0;

    this.init();
  }

  init() {
    this.game.addEventListener("mousedown", e => this.startDrag(e));
    window.addEventListener("mouseup", () => this.stopDrag());
    window.addEventListener("mousemove", e => this.drag(e));
    this.update();
  }

  startDrag(e) {
    this.dragging = true;
    this.startX = e.clientX;
    this.startY = e.clientY;
  }

  stopDrag() {
    this.dragging = false;
  }

  drag(e) {
    if (!this.dragging) return;

    const dx = e.clientX - this.startX;
    const dy = e.clientY - this.startY;

    this.startX = e.clientX;
    this.startY = e.clientY;

    this.x -= dx;
    this.y -= dy;

    this.clamp();
    this.update();
  }

  clamp() {
    const maxX = this.worldWidth - window.innerWidth;
    const maxY = this.worldHeight - window.innerHeight;

    this.x = Math.max(0, Math.min(maxX, this.x));
    this.y = Math.max(0, Math.min(maxY, this.y));
  }

  update() {
    this.camera.style.transform =
      `translate(${-this.x}px, ${-this.y}px)`;
  }
}

/* =====================================================
   üå± MAPA EM TILES
===================================================== */
const mapa = document.getElementById("mapa");

for (let i = 0; i < 25 * 25; i++) {
  const tile = document.createElement("div");
  tile.className = "tile grama";
  mapa.appendChild(tile);
}

/* =====================================================
   üéÆ VARI√ÅVEIS DO JOGO
===================================================== */
let flores = 0;
let porClique = 1;
let auto = 0;
let valorFlor = 3;

let custoClique = 10;
let custoAuto = 20;
let custoFlor = 30;

const floresEl = document.getElementById("flores");
const porCliqueEl = document.getElementById("porClique");
const autoEl = document.getElementById("auto");
const cameraEl = document.getElementById("camera");
const gameEl = document.getElementById("game");

/* =====================================================
   üì∑ INICIALIZA C√ÇMERA POR ARRASTE
===================================================== */
const cam = new DragCamera(gameEl, cameraEl, 3000, 3000);

/* =====================================================
   üå∏ FLORES
===================================================== */
function criarFlor() {
  if (Math.random() > 0.4) return;

  const flor = document.createElement("img");
  flor.src = "flor.png";
  flor.className = "flor";

  flor.style.left = Math.random() * 2900 + "px";
  flor.style.top = Math.random() * 2900 + "px";

  flor.onclick = () => {
    flores += valorFlor;
    flor.remove();
    atualizar();
  };

  cameraEl.appendChild(flor);
}

setInterval(criarFlor, 3500);

/* =====================================================
   HUD / UPGRADES
===================================================== */
gameEl.addEventListener("click", e => {
  if (e.target.classList.contains("flor")) return;
  flores += porClique;
  atualizar();
});

setInterval(() => {
  flores += auto;
  atualizar();
}, 1000);

function atualizar() {
  floresEl.textContent = flores;
  porCliqueEl.textContent = porClique;
  autoEl.textContent = auto;
  document.getElementById("c1").textContent = custoClique;
  document.getElementById("c2").textContent = custoAuto;
  document.getElementById("c3").textContent = custoFlor;
}

function uparClique() {
  if (flores >= custoClique) {
    flores -= custoClique;
    porClique++;
    custoClique *= 2;
    atualizar();
  }
}

function uparAuto() {
  if (flores >= custoAuto) {
    flores -= custoAuto;
    auto++;
    custoAuto *= 2;
    atualizar();
  }
}

function uparFlor() {
  if (flores >= custoFlor) {
    flores -= custoFlor;
    valorFlor += 2;
    custoFlor *= 2;
    atualizar();
  }
}

atualizar();
</script>

</body>
</html>
