<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jardim de Santa Teresinha</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

#game {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #7bbf6a;
  cursor: grab;
}
#game:active { cursor: grabbing; }

#camera {
  position: absolute;
  width: 3000px;
  height: 3000px;
}

/* ===== CAMADAS ===== */
.layer {
  position: absolute;
  width: 3000px;
  height: 3000px;
}

#chao        { z-index: 1; }
#decoracao   { z-index: 2; }
#objetos     { z-index: 3; }
#personagens { z-index: 4; }
#efeitos     { z-index: 5; }

/* ===== TILE PEQUENO ===== */
.tile {
  position: absolute;
  width: 32px;
  height: 32px;
}

/* ===== GRAMA ===== */
.grama {
  background-color: #69b34c;
}
.grama2 {
  background-color: #63aa45;
}
.grama3 {
  background-color: #5da040;
}

/* ===== FLORES ===== */
.flor {
  position: absolute;
  width: 24px;
  cursor: pointer;
}

/* ===== SANTA ===== */
#santa {
  position: absolute;
  width: 64px;
  left: 1500px;
  top: 1500px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 10;
}

/* ===== HUD ===== */
#hud {
  position: fixed;
  top: 20px;
  left: 20px;
  background: rgba(255,255,255,0.9);
  padding: 12px;
  border-radius: 10px;
  z-index: 100;
}

/* ===== UPGRADES ===== */
#upgrades {
  position: fixed;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 100;
}

button {
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: #7b4bb7;
  color: white;
  font-weight: bold;
  cursor: pointer;
}

/* ===== BIBLIOTECA PIXEL ART ===== */
.telhado1 { background: #b33a2b; }
.telhado2 { background: #9e2f24; }

.parede1  { background: #e8cfa8; }
.parede2  { background: #d8b98a; }

.janela   { background: #b5f0ff; }
.porta    { background: #6b3d1f; }

.sombra   { background: rgba(0,0,0,0.15); }

</style>
</head>

<body>

<div id="game">
  <div id="camera">

    <div id="chao" class="layer"></div>
    <div id="decoracao" class="layer"></div>
    <div id="objetos" class="layer"></div>
    <div id="personagens" class="layer"></div>
    <div id="efeitos" class="layer"></div>

    <img src="santa.png" id="santa">

  </div>
</div>

<div id="hud">
  üå∏ Flores: <span id="flores">0</span><br>
  üëÜ Por clique: <span id="porClique">1</span><br>
  ‚è± Auto/s: <span id="auto">0</span>
</div>

<div id="upgrades">
  <button onclick="uparClique()">Upar clique (üå∏ <span id="c1">10</span>)</button>
  <button onclick="uparAuto()">Upar auto (üå∏ <span id="c2">20</span>)</button>
  <button onclick="uparFlor()">Upar flor (üå∏ <span id="c3">30</span>)</button>
</div>

<script>
/* ===== CONFIG TILEMAP ===== */
const TILE = 32;
const MAP_W = 90;
const MAP_H = 90;

const chao = document.getElementById("chao");
const decoracao = document.getElementById("decoracao");
const objetos = document.getElementById("objetos");

/* ===== MAPA GRAMA VARIADA ===== */
function renderChao() {
  for (let y = 0; y < MAP_H; y++) {
    for (let x = 0; x < MAP_W; x++) {

      const tile = document.createElement("div");
      tile.classList.add("tile");

      const r = Math.random();
      if (r < 0.33) tile.classList.add("grama");
      else if (r < 0.66) tile.classList.add("grama2");
      else tile.classList.add("grama3");

      tile.style.left = x * TILE + "px";
      tile.style.top  = y * TILE + "px";

      chao.appendChild(tile);
    }
  }
}
renderChao();

/* ===== BIBLIOTECA DESENHADA EM TILES ===== */
function construirBiblioteca(tx, ty) {

  const layout = [
    "     TTTTTTTTTTT     ",
    "   TTTTTTTTTTTTTTT   ",
    "  TTTTTTTTTTTTTTTTT  ",
    "  TTTTTTTTTTTTTTTTT  ",
    "   SSSSSSSSSSSSSSS   ",
    "   PPPPPPPPPPPPPPP   ",
    "   PPJJJPPPPJJJPPP   ",
    "   PPJJJPPPPJJJPPP   ",
    "   PPPPPDDDDPPPPPP   ",
    "   PPPPPDDDDPPPPPP   ",
    "   PPPPPPPPPPPPPPP   "
  ];

  layout.forEach((row, y) => {
    [...row].forEach((c, x) => {

      if (c === " ") return;

      const tile = document.createElement("div");
      tile.classList.add("tile");

      if (c === "T") tile.classList.add("telhado1");
      if (c === "S") tile.classList.add("sombra");

      if (c === "P") tile.classList.add("parede1");
      if (c === "J") tile.classList.add("janela");
      if (c === "D") tile.classList.add("porta");

      tile.style.left = (tx + x) * TILE + "px";
      tile.style.top  = (ty + y) * TILE + "px";

      objetos.appendChild(tile);
    });
  });
}

construirBiblioteca(3, 3);

/* ===== CLICKER ORIGINAL ===== */
let flores = 0;
let porClique = 1;
let auto = 0;
let valorFlor = 3;

let custoClique = 10;
let custoAuto = 20;
let custoFlor = 30;

const floresEl = document.getElementById("flores");
const porCliqueEl = document.getElementById("porClique");
const autoEl = document.getElementById("auto");

function atualizarHUD() {
  floresEl.textContent = flores;
  porCliqueEl.textContent = porClique;
  autoEl.textContent = auto;
  document.getElementById("c1").textContent = custoClique;
  document.getElementById("c2").textContent = custoAuto;
  document.getElementById("c3").textContent = custoFlor;
}
atualizarHUD();

/* Clique */
game.onclick = e => {
  if (e.target.classList.contains("flor")) return;
  flores += porClique;
  atualizarHUD();
};

/* Flores spawn */
function criarFlor() {
  if (Math.random() > 0.5) return;

  const flor = document.createElement("img");
  flor.src = "flor.png";
  flor.className = "flor";

  flor.style.left = Math.random() * 2800 + "px";
  flor.style.top  = Math.random() * 2800 + "px";

  flor.onclick = e => {
    e.stopPropagation();
    flores += valorFlor;
    flor.remove();
    atualizarHUD();
  };

  decoracao.appendChild(flor);
}
setInterval(criarFlor, 2500);

/* Auto */
setInterval(() => {
  flores += auto;
  atualizarHUD();
}, 1000);

/* Upgrades */
function uparClique() {
  if (flores >= custoClique) {
    flores -= custoClique;
    porClique++;
    custoClique *= 2;
    atualizarHUD();
  }
}
function uparAuto() {
  if (flores >= custoAuto) {
    flores -= custoAuto;
    auto++;
    custoAuto *= 2;
    atualizarHUD();
  }
}
function uparFlor() {
  if (flores >= custoFlor) {
    flores -= custoFlor;
    valorFlor += 2;
    custoFlor *= 2;
    atualizarHUD();
  }
}

/* ===== C√ÇMERA ARRAST√ÅVEL ===== */
let camX = 1400, camY = 1400;
let dragging = false;
let lastX = 0, lastY = 0;

game.addEventListener("mousedown", e => {
  dragging = true;
  lastX = e.clientX;
  lastY = e.clientY;
});
window.addEventListener("mouseup", () => dragging = false);

window.addEventListener("mousemove", e => {
  if (!dragging) return;

  camX -= (e.clientX - lastX);
  camY -= (e.clientY - lastY);

  lastX = e.clientX;
  lastY = e.clientY;

  camera.style.transform =
    `translate(${-camX}px, ${-camY}px)`;
});
</script>

</body>
</html>
